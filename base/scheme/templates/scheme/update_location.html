{% extends 'main/index.html' %}

{% block title %} Изменение объекта {% endblock %}

{% block content %}
<!--JS для добавления строки с новым оборудованием-->
<script type="text/html" id="item-template">
    <div class="card col-6" id="item-__prefix__">
        <div>&nbsp</div>
        <table>
            <tbody>
        <tr><td>{{equipment_formset.empty_form.equipment.label}}:</td><td> {{ equipment_formset.empty_form.equipment }}</td></tr>
        <tr><td>{{equipment_formset.empty_form.room.label}}:</td><td> {{ equipment_formset.empty_form.room }}</td></tr>
        <tr><td>{{equipment_formset.empty_form.mount_cab.label}}:</td><td> {{ equipment_formset.empty_form.mount_cab }}</td></tr>
        <tr><td>{{equipment_formset.empty_form.ip_address.label}}:</td><td> {{ equipment_formset.empty_form.ip_address }}</td></tr>
        <tr><td>{{equipment_formset.empty_form.inv_number.label}}:</td><td> {{ equipment_formset.empty_form.inv_number }}</td></tr>
        <tr><td>{{equipment_formset.empty_form.id_number.label}}:</td><td> {{ equipment_formset.empty_form.id_number }}</td></tr>
        <tr><td>{{equipment_formset.empty_form.description.label}}:</td><td> {{ equipment_formset.empty_form.description }}</td></tr>
    </tbody>
</table>
    </div>
</script>

<div class="container-fluid">
    <form method="post">
        {% csrf_token %}
        <div class="card">
            <div class="card-header row align-items-center">
                <div class="col-10 text-right">
                    <h4>Изменение объекта</h4>
                </div>
                <div class="col-2 align-items-start">
                    <button type="submit" class="btn btn-primary activate">Принять изменения</button>
                </div>
        </div>
            <div class="card-body">
                {{form.non_form_errors }}
                {{form.location.label}}: {{form.location}} <br><br>
                {{form.address.label}}: &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{{form.address}}
                <p></p>
                <h5 class="text-primary">Изменить оборудование</h5>
                {{ equipment_formset.non_form_errors }}
                {{ equipment_formset.management_form }}
                <div id="items-form-container"> 
                {% for eq in equipment_formset %}
                <div class= "card col-6" id="item-{{ forloop.counter0 }}">
                    <div>&nbsp</div>
                <table>
                    <tbody>
                    <tr><td>{{ eq.id}}</td></tr>
                    <tr><td>{{ eq.equipment.label}}:</td><td> {{ eq.equipment}}</td></tr>
                    <tr><td>{{ eq.room.label}}:</td><td> {{ eq.room}}</td></tr>
                    <tr><td>{{ eq.mount_cab.label}}:</td><td> {{ eq.mount_cab}}</td></tr>
                    <tr><td>{{ eq.ip_address.label}}:</td><td> {{ eq.ip_address}}</td></tr>
                    <tr><td>{{ eq.inv_number.label}}:</td><td>{{ eq.inv_number}}</td></tr>
                    <tr><td>{{ eq.id_number.label}}:</td><td> {{ eq.id_number}}</td></tr>
                    <tr><td>{{ eq.description.label}}:</td><td> {{ eq.description }}</td></tr>
                    <tr><td>Удаление: {{ eq.DELETE }}</td></tr>
                     <br><br>
                    </tbody>
                </table>
                </div>
                {% endfor %}
                </div>
                <br>
                <button class="btn btn-primary add-item" type="button" id="add-item-button">
                    Добавить строку
                </button> 
            </div>
        </div>
        <div class="mt-3 mb-5">
            
        </div>
    </form>
</div>

{% endblock%} 